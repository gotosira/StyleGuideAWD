function location_complete(){$j.widget("custom.catcomplete",$j.ui.autocomplete,{_create:function(){this._super(),this.widget().menu("option","items","> :not(.ui-autocomplete-category)")},_renderMenu:function(e,t){var a=this,o="";$j.each(t,function(t,n){var s;n.category!=o&&(e.append('<li class="ui-autocomplete-category">'+n.category+"</li>"),o=n.category),s=a._renderItemData(e,n),n.category&&s.attr("aria-label",n.category+" : "+n.label)})}}),$j(".form-field").click(function(){var e;$j(".form-field").catcomplete({delay:0,source:function(t,a){var o=new RegExp(t.term,"i");e&&e.abort();var n="static.asiawebdirect.com";-1!=document.location.hostname.indexOf("1")&&(n=document.location.hostname),e=$j.ajax({url:"//"+n+"/v8/js/popular.php",dataType:"jsonp",data:{destid:$j(".form-field").attr("data-id")},cache:!1,success:function(e){a($j.map(e.list,function(e){return o.test(e.label)?{label:e.label,category:e.category}:void 0}))}})},minLength:0}).keyup(function(){$j(".form-field").catcomplete({source:function(t,a){var o=new RegExp(t.term,"i");e&&e.abort();var n="static.asiawebdirect.com";-1!=document.location.hostname.indexOf("1")&&(n=document.location.hostname),e=$j.ajax({url:"//"+n+"/v8/js/hotel.php",dataType:"jsonp",data:{destid:$j(".form-field").attr("data-id"),destname:$j(".form-field").attr("data-name"),destpath:$j(".form-field").attr("data-path"),sname:$j(".form-field").val()},cache:!1,success:function(e){a($j.map(e.list,function(e){return o.test(e.label)?{label:e.label,category:e.category}:void 0}))}})},delay:10,minLength:3})}),$j(".form-field").catcomplete("search","");var t=document.body.clientWidth;768>t&&$j("body").addClass("stop-scrolling")}),$j(".form-field-bottom").click(function(){var e;$j(".form-field-bottom").catcomplete({delay:0,source:function(t,a){var o=new RegExp(t.term,"i");e&&e.abort();var n="static.asiawebdirect.com";-1!=document.location.hostname.indexOf("1")&&(n=document.location.hostname),e=$j.ajax({url:"//"+n+"/v8/js/popular.php",dataType:"jsonp",data:{destid:$j(".form-field-bottom").attr("data-id")},cache:!1,success:function(e){a($j.map(e.list,function(e){return o.test(e.label)?{label:e.label,category:e.category}:void 0}))}})},minLength:0}).keyup(function(){$j(".form-field-bottom").catcomplete({source:function(t,a){var o=new RegExp(t.term,"i");e&&e.abort();var n="static.asiawebdirect.com";-1!=document.location.hostname.indexOf("1")&&(n=document.location.hostname),e=$j.ajax({url:"//"+n+"/v8/js/hotel.php",dataType:"jsonp",data:{destid:$j(".form-field-bottom").attr("data-id"),destname:$j(".form-field-bottom").attr("data-name"),destpath:$j(".form-field-bottom").attr("data-path"),sname:$j(".form-field-bottom").val()},cache:!1,success:function(e){a($j.map(e.list,function(e){return o.test(e.label)?{label:e.label,category:e.category}:void 0}))}})},delay:10,minLength:3})}),$j(".form-field-bottom").catcomplete("search","");var t=document.body.clientWidth;768>t&&$j("body").addClass("stop-scrolling")})}function hideMenu(){function e(){var e=$j(this).scrollTop();Math.abs(a-e)<=o||(e>a&&e>n?($j("header").removeClass("nav-header-down").addClass("nav-header-up"),$j(".toggle-search").removeClass("nav-toggle-search-down").addClass("nav-toggle-search-up"),$j(".datepicker").css("display","none")):e+$j(window).height()<$j(document).height()&&($j("header").removeClass("nav-header-up").addClass("nav-header-down"),ww>=768?$j(".toggle-search").removeClass("nav-toggle-search-down").addClass("nav-toggle-search-up"):$j(".toggle-search").removeClass("nav-toggle-search-up").addClass("nav-toggle-search-down")),a=e)}var t,a=0,o=200,n=$j("header").outerHeight(),s=window.matchMedia("(orientation: portrait)");$j(".search_rate_box").removeClass("open_menu").addClass(s.matches?"closed_menu":"closed_menu"),$j(window).scroll(function(e){t=!0}),setInterval(function(){t&&(e(),t=!1)},250)}function portalOpenPageSearch(){var e="",t=null;if(t=$j(".form-container .form-check-in"),null!=t&&""!=t.val()&&"Check-In"!=t.val()){var a="";a=t.val();var o=a.split("-");3==o.length&&(e="mtxCheckIn="+o[2]+o[0]+o[1])}if(t=$j(".form-container .form-check-out"),null!=t&&""!=t.val()&&"Check-Out"!=t.val()){var a="";a=t.val();var o=a.split("-");3==o.length&&(""!=e&&(e+="&"),e=e+"mtxCheckOut="+o[2]+o[0]+o[1])}var n=!0;if(t=$j(".form-container .form-field"),null!=t&&""!=t.val()&&""!=t.val()&&(n=!1,""!=e&&(e+="&"),e=e+"q="+t.val()),1==n)return alert("Please input search"),!1;var s="http://www.asiawebdirect.com/freetextsearch/?version=2.2&start=0&rows=10&indent=on&wt=json";""!=e&&(s=s+"&"+e),"undefined"!=typeof aidSpecial&&(s=s+"&aid="+aidSpecial),"undefined"!=typeof bidSpecial&&(s=s+"&bid="+bidSpecial),window.open(s)}function portalOpenPageSearchBottom(){var e="",t=null;if(t=$j(".form-container-bottom .form-check-in"),null!=t&&""!=t.val()&&"Check-In"!=t.val()){var a="";a=t.val();var o=a.split("-");3==o.length&&(e="mtxCheckIn="+o[2]+o[0]+o[1])}if(t=$j(".form-container-bottom .form-check-out"),null!=t&&""!=t.val()&&"Check-Out"!=t.val()){var a="";a=t.val();var o=a.split("-");3==o.length&&(""!=e&&(e+="&"),e=e+"mtxCheckOut="+o[2]+o[0]+o[1])}var n=!0;if(t=$j(".form-container-bottom .form-field-bottom"),null!=t&&""!=t.val()&&""!=t.val()&&(n=!1,""!=e&&(e+="&"),e=e+"q="+t.val()),1==n)return alert("Please input search"),!1;var s="http://www.asiawebdirect.com/freetextsearch/?version=2.2&start=0&rows=10&indent=on&wt=json";""!=e&&(s=s+"&"+e),"undefined"!=typeof aidSpecial&&(s=s+"&aid="+aidSpecial),"undefined"!=typeof bidSpecial&&(s=s+"&bid="+bidSpecial),window.open(s)}function TestBlocked(){"none"==$j("#div-gpt-ad-1414118221795-0, #div-gpt-ad-1414118488005-0, #div-gpt-ad-1414118583001-0, #div-gpt-ad-1412304856582-0, #div-gpt-ad-1412304856582-0, #div-gpt-ad-1414118221795-0, #div-gpt-ad-1414118488005-0, #div-gpt-ad-1414118583001-0").css("display")&&($j("#div-gpt-ad-1414118221795-0, #div-gpt-ad-1414118488005-0, #div-gpt-ad-1414118583001-0, #div-gpt-ad-1412304856582-0, #div-gpt-ad-1414118221795-0, #div-gpt-ad-1414118488005-0, #div-gpt-ad-1414118583001-0").parent().addClass("display_block"),$j("#div-gpt-ad-1412304856582-0").parent().addClass("display_blocked_recommend"))}var resizing=!1;$j(document).ready(function(){"use strict";var t=document.body.clientWidth;768>t&&$j(".toggle-search").click(function(){$j(".search_rate_box").hasClass("open_menu")?$j(".search_rate_box").removeClass("open_menu").addClass("closed_menu"):$j(".search_rate_box").removeClass("closed_menu").addClass("open_menu")});var a=function(){var e=0,t,a,o=[],n=0;$j(".tour_price").each(function(){var a=$j(this).find(".tour_price_value").text();"N/A"==a?(a.replace(/,/g,""),a=parseInt(a),o.push(a),0==n&&(n=0),e++):(a.replace(/,/g,""),o.push(a),t=$j(this).find(".tour_currency").text(),0==n&&(n=$j(this).find(".tour_price_value").text()),n.replace(/,/g,"")>a&&(n=$j(this).find(".tour_price_value").text()),e++)}),a=n,0===a&&(a="N/A",t=""),1/0==a&&(a="",t=""),$j(".tourPrice").text(a),$j(".tourPrice_currency").text(t)};a(),$j("#checkIn").blur(),$j("#checkOut").blur(),$j("#checkOut").prop("disabled",!0),$j("#checkIn-bottom").blur(),$j("#checkOut-bottom").blur(),$j("#checkOut-bottom").prop("disabled",!0);var o=function(){var e=$j("#checkIn").datepicker("getDate"),t=$j("#checkOut").datepicker("getDate");if(!e||!t)return!1;var a=(t-e)/1e3/60/60/24;1>a&&(alert("Please select check-in date."),a=0),$j(".form-night-text").val(a+" nights")};$j.fn.datepicker.defaults.format="mm-dd-yyyy";var n=new Date;n.setDate(n.getDate()),$j(".input-daterange").datepicker({autoclose:!0,startDate:n,forceParse:!1});var s=new Date,c=new Date,r=$j("#checkIn").datepicker({}).on("show",function(){$j(".dropdown-menu").removeClass("checkout_box"),640>t&&(window.scrollTo(0,0),$j("body").bind("touchmove",function(e){e.preventDefault()}),$j("body").addClass("stop-scrolling"))}).on("changeDate",function(e){var t=new Date(e.date);s=t,s.setDate(t.getDate()+1)}).on("hide",function(){$j("#checkOut").datepicker("update",s),$j("#checkOut").datepicker("show",function(){$j(".dropdown-menu").addClass("checkout_box")}),$j("#checkOut").prop("disabled",!1),$j("#checkOut")[0].focus();var e=$j(this);setTimeout(function(){e.show()},1)}),i=$j("#checkOut").datepicker({}).on("show",function(){$j(".dropdown-menu").addClass("checkout_box")}).on("changeDate",function(e){var t=new Date(e.date);c=t}).on("hide",function(){$j("body").unbind("touchmove"),$j("body").removeClass("stop-scrolling"),o();var e=$j(this);setTimeout(function(){e.show()},1)});$j(".hotelSearchBottom").find("input").attr("name","check-in-date-bottom");var l=function(){var e=$j("#checkIn-bottom").datepicker("getDate"),t=$j("#checkOut-bottom").datepicker("getDate");if(!e||!t)return!1;var a=(t-e)/1e3/60/60/24;1>a&&(alert("Please select check-in date."),a=0),$j(".form-night-text-bottom").val(a+" nights")};$j.fn.datepicker.defaults.format="mm-dd-yyyy";var d=new Date;d.setDate(d.getDate()),$j("#checkIn-bottom, #checkOut-bottom").datepicker({autoclose:!0,startDate:d,forceParse:!1});var u=new Date,h=new Date,m=$j("#checkIn-bottom").datepicker({}).on("show",function(){$j(".dropdown-menu").removeClass("checkout_box"),640>t&&(window.scrollTo(0,0),$j("body").bind("touchmove",function(e){e.preventDefault()}),$j("body").addClass("stop-scrolling"))}).on("changeDate",function(e){var t=new Date(e.date);u=t,u.setDate(t.getDate()+1)}).on("hide",function(){$j("#checkOut-bottom").datepicker("update",u),$j("#checkOut-bottom").datepicker("show",function(){$j(".dropdown-menu").addClass("checkout_box")}),$j("#checkOut-bottom").prop("disabled",!1),$j("#checkOut-bottom")[0].focus();var e=$j(this);setTimeout(function(){e.show()},1)}),j=$j("#checkOut-bottom").datepicker({}).on("show",function(){$j(".dropdown-menu").addClass("checkout_box")}).on("changeDate",function(e){var t=new Date(e.date);h=t}).on("hide",function(){$j("body").unbind("touchmove"),$j("body").removeClass("stop-scrolling"),l();var e=$j(this);setTimeout(function(){e.show()},1)});$j("input[readonly]").on("focus",function(e){$j(this).trigger("blur")}),$j(".dropdown-menu").css("display","none"),$j(".search_index").length>0&&$j(".top_bg").find("img").addClass("active_search");var p=0,v="readmore_checkbox"+p,f="readmore_btn"+p;$j(".toggle_content").each(function(){var e=$j(this).next().find("p").height(),t=$j(this).next().find("p").length;54>=e&&1>=t||($j(this).attr("id",v),$j(this).next().attr("id",f),$j(this).next().after("<label for="+v+' class="readmore_check closed_schedule">Read More</label>'),p+=1,f="readmore_btn"+p,v="readmore_checkbox"+p)}),$j("label.readmore_check").click(function(){$j(this).hasClass("closed_schedule")?($j(this).removeClass("closed_schedule"),$j(this).addClass("open_schedule"),$j(this).text("Hide")):($j(this).removeClass("open_schedule"),$j(this).addClass("closed_schedule"),$j(this).text("Read More"))}),$j(".menu_over li a").each(function(){$j(this).next().length>0&&$j(this).addClass("parent")}),$j(".toggleMenu").click(function(){e.preventDefault(),$j(this).toggleClass("active"),$j(".menu_over").toggle()})});var adjustMenu=function(){"use strict";var e=document.body.clientWidth;1023>=e?($j(".search_index .top_bg > img").addClass("blur_img").removeClass("no_blur"),e>=640&&767>=e?$j(".destination_title").css("display","none"):$j(".destination_title").css("visibility","hidden")):e>=1024&&($j(".search_index .top_bg img").removeClass("no_blur"),$j("body").hasClass("tour-page-detail")?$j(".search_rate_box").removeClass("open_menu").addClass("closed_menu"):$j(".search_rate_box").removeClass("closed_menu").addClass("open_menu"),$j(".rate_title").show(),$j(".main_wrapper").removeClass("push_right"),$j(".sub_menu").removeClass("reveal"),$j(".search_wrap").show(),$j(".toggleMenu").css("display","none"),$j(".menu_over").show()),e>=768&&$j(".search_rate_box").removeClass("closed_menu").addClass("open_menu"),768>=e?$j("nav#main-nav").addClass("mobile-menu"):$j("nav#main-nav").removeClass("mobile-menu"),1023>e&&($j(".search_cover").addClass("search_hide"),check_responsive(e),$j(".menu_over li").removeClass("hover"),$j(".menu_over li").addClass("mobile"),$j(".menu_over li").unbind("mouseenter mouseleave"),$j(".menu_over li a.parent").bind("click",function(e){e.preventDefault(),$j(this).parent("li").toggleClass("hover"),$j(this).parent("li").hasClass("hover")||$j(this).next().find("li").removeClass("hover active")}),$j(".menu_over li a").click(function(){$j(this).parent().hasClass("active")&&$j(this).parent().parent().hasClass("menu_over")?($j(".menu_over > li").show(),$j(".menu_over").find("li").removeClass("active")):$j(this).parent().hasClass("active")&&$j(this).parent().parent().parent().parent().hasClass("menu_over")?($j(".menu_over > li > li").show(),$j(this).parent().parent().parent().addClass("active")):($j(".menu_over li").removeClass("active"),$j(this).parent("li").addClass("active"),$j(this).parent().parent().hasClass("menu_over")&&($j('.menu_over > li:not(".hover")').hide(),$j(".menu_over > li:first-child").show()),$j(this).parent().parent().parent().hasClass("menu_over")&&($j('.menu_over > li > li:not(".hover")').hide(),$j(".menu_over > li:first-child").show()))}),$j("#main-nav-check").change(function(){if(resizing=$j(this).is(":checked")?!1:!0,window.scrollTo(0,0),$j(this).prop("checked"))$j(".gssb_c").hide(),$j(".search_index .top_bg img").addClass("no_blur").removeClass("blur_img");else{$j(".site_logo").removeClass("has_Scrolled"),$j(".gssb_c").show(),$j(".search_index .top_bg img").addClass("blur_img").removeClass("no_blur");var e=document.body.clientWidth;e>=768&&$j(".search_rate_box").removeClass("closed_menu").addClass("open_menu")}}))},ShowHideDesktopSearch=function(){$j(document).click(function(e){var t=e.target;$j(t).is(".search_cover")||$j(t).is(".gsc-input")?($j(".search_cover").addClass("active"),$j(".gsc-input").show(),$j(".gsc-input").focus(),$j(".gsc-completion-container").show(),$j(".search_cover").addClass("search_cover_holder_off")):($j(".search_cover").removeClass("active"),$j(".gsc-input").hide(),$j(".gsc-completion-container").hide(),$j(".search_cover").removeClass("search_cover_holder_off"))})},check_responsive=function(e){wrap_toggle_search(),768>e&&($j(".toggle-search").data("clicked")||resizing&&hideMenu(),$j(".toggle-search").removeClass("cross")),e>1023&&($j(".toggle-search").removeClass("cross"),$j(".menu_over li").removeClass("mobile"),$j(".menu_over li").unbind("click"),$j(".menu_over li a.parent").unbind("click"),$j(".menu_over li").bind("mouseenter",function(){$j(this).addClass("hover")}),$j(".menu_over li").bind("mouseleave",function(){$j(this).removeClass("hover")}))};$j(document).ready(function(){var e=document.body.clientWidth;$j(".mobileCallmeBig").addClass("animated bounceInUp"),$j(".mobileCallmeSmall").addClass("animated bounceInUp"),$j(".toggle-menu").click(function(){$j(".mobileCallmeBig").hasClass("bounceInUp")?($j(".mobileCallmeBig").removeClass("bounceInUp").addClass("bounceOutDown"),$j(".mobileCallmeSmall").removeClass("bounceInUp").addClass("bounceOutDown")):($j(".mobileCallmeBig").removeClass("bounceOutDown").addClass("bounceInUp"),$j(".mobileCallmeSmall").removeClass("bounceOutDown").addClass("bounceInUp"))}),$j(".form-field").click(function(){$j(".search_rate_box").removeClass("closed_menu").addClass("open_menu")}),wrap_toggle_search(),$j(".form-container .searchButton").click(function(){portalOpenPageSearch()}),$j(".form-container-bottom .searchButton").click(function(){portalOpenPageSearchBottom()}),$j(".top_menu > ul > li").hover(function(){$j(this).find("ul").show(),$j(this).addClass("arrow_down")},function(){$j(this).find("ul").hide(),$j(this).removeClass("arrow_down")}),adjustMenu(),$j(".send_feed").click(function(){window.scrollTo(0,0)}),$j(".remodal-close").text("X"),$j(".pdf_sticky").hover(function(){$j(".sticky_wrapper").addClass("slide_out")},function(){$j(".sticky_wrapper").removeClass("slide_out")}),e>1023&&location_complete(),768>e&&($j(".toggle-search").data("clicked")?alert("test"):resizing&&hideMenu()),$j("img.top_bg_img").on("dragstart",function(e){e.preventDefault()}),$j("body").hasClass("search_index")?$j(".search_cover").addClass("active"):ShowHideDesktopSearch(),check_responsive(e),$j(".dropdown-menu").addClass("dropdown-first"),$j(".dropdown-menu").next().addClass("dropdown-second"),$j(".form-field").on("blur",function(){$j("body").removeClass("stop-scrolling"),$j(".search_rate_box").removeClass("closed_menu").addClass("open_menu")}),TestBlocked(),$j("div.toggle-heading").click(function(){return $j(this).next().slideToggle("fast"),!1}),$j(".display_blocked_recommend, .display_block").length&&$j(".display_blocked_recommend, .display_block").wrap('<a href="http://www.asiawebdirect.com"></a>')});var wrap_toggle_search=function(){var e=document.body.clientWidth;e>=768&&1023>=e?$j(".toggle-search").closest("a").length||$j(".toggle-search").wrap('<a class="toggle-wrapper" href="/search/index.html" ></a>'):$j(".toggle-wrapper > .toggle-search").unwrap()};